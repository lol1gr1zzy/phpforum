# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ N2

## –û—Å–Ω–æ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Ç–∏
–∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏—Å—Ç–µ–º—ã –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ª–µ–Ω—Ç–æ–π
–∑–∞–º–µ—Ç–æ–∫, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –æ–±—Ä–∞—Ç–Ω–æ–º —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ —Ñ–æ—Ä–º—É
–¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏. –í –ª–µ–Ω—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–º–µ—Ç–æ–∫.
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–º–µ—Ç–æ–∫ –≤ –æ–±—â—É—é –ª–µ–Ω—Ç—É
- –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —á—É–∂–∏–µ –∑–∞–º–µ—Ç–∫–∏ (–ª–∞–π–∫–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —á—É–∂–∏–º –∑–∞–º–µ—Ç–∫–∞–º
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ –∑–∞–º–µ—Ç–∫–∞–º
- –†–µ–∞–∫—Ü–∏–∏ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è

## –°—Ç–µ–∫
 -php 7.2
 -MySQL 8.0
 -Open Server

**1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö
—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã**

![](https://github.com/lol1gr1zzy/phpforum/blob/main/png1.jpg)

```
1. –ù–∞ —Å–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–º–µ—Ç–æ–∫ –≤ –æ–±—â—É—é –ª–µ–Ω—Ç—É
3. –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —á—É–∂–∏–µ –∑–∞–º–µ—Ç–∫–∏ (–ª–∞–π–∫, –¥–∏–∑–ª–∞–π–∫)
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ –∑–∞–º–µ—Ç–∫–∞–º
6. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –µ–µ –∫–∞–∫ —Å
—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π, —Ç–∞–∫ –∏ –±–µ–∑ –Ω–µ–µ.
```
**2. –û–ø–∏—Å–∞–Ω–∏–µ API —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏**
    –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏:
    
![](https://github.com/lol1gr1zzy/phpforum/blob/main/png2.jpg)

Post –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ: —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞.
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∞–π–∫–∞/–¥–∏–∑–ª–∞–π–∫–∞:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/png3.jpg)

Post –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:id –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—É—é –æ—Ü–µ–Ω–∏–≤–∞—é—Ç.
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/png4.jpg)

Post –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ: —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è, id –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—É—é
–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é—Ç.

**3. –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
    –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MySQL. –ò–º–µ—é—Ç—Å—è 2 —Ç–∞–±–ª–∏—Ü—ã.
    –í –ø–µ—Ä–≤–æ–π (posts) —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ—Å—Ç—ã, –≤—Ä–µ–º—è, –∏—Ö —Ñ–æ—Ç–æ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ —Å
    –¥–∏–∑–ª–∞–π–∫–∞–º–∏. –ú–æ–¥–µ–ª—å –æ–ø–∏—Å–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
    
![](https://github.com/lol1gr1zzy/phpforum/blob/main/DB1.jpg)
    
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ id
–ø–æ—Å—Ç–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –æ–Ω —Å–≤—è–∑–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ú–æ–¥–µ–ª—å –æ–ø–∏—Å–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º
–æ–±—Ä–∞–∑–æ–º:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/DB2.jpg)
    
**4. –û–ø–∏—Å–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤**
–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/alg1.jpg)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/alg2.jpg)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞–≤–∏—Ç –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫:

![](https://github.com/lol1gr1zzy/phpforum/blob/main/alg3.jpg)

5.–ó–Ω–∞—á–∏–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞:
–í—ã–≤–æ–¥ –ø–æ—Å—Ç–æ–≤ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```php
if($result = mysqli_query($db, $sql)){
    $page_count = ceil($rowsCount / $count);
    echo "<p></p>";

    foreach($result as $row){

        echo "<div><tr>";
            echo "<td>" . $row["text"] . "</td>: ";
            echo "<td>" . $row["time"] . "</td><br>"; 
            print "<img src='/uploads/{$row['image']}' width='200px'><br>";
            echo "<form action='like.php' method='POST'>
     <button style='width:25x;height:25px' name='like' type='submit'value='{$row['id']}'> üëç {$row['likes']}</button>
     <button style='width:25x;height:25px' name='dislike' type='submit' value='{$row['id']}'> üëé {$row['dislikes']}</button></form>";
            echo "<form action='comment.php' method'GET'>
                 <input name='comment' type='text' placeholder='–í–∞—à –∫–æ–º–º–µ–Ω—Ç'><button name='com' type='submit' value='{$row['id']}'> –ö–æ–º–º </button></form>";
            echo "<button id='btn <?php echo {$row['id']};?>' onclick='show_comments('<?php echo {$row['id']}')'>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å</button>";
        echo "</tr><br></div>";
        if($result2 = mysqli_query($db, $sql2)){
            foreach($result2 as $com){
                if($com["post_id"] == $row["id"]){
                    echo "<pre><table id='c'><tr>";
                echo "<td>" . $com["text"] . "</td>";
                echo "<td>" . $com["time"] . "</td>";
                echo "</tr><br></table></pre>";
                }
            }
        }
        echo "<br><br><br><br>";
    }

    echo "</table>";
    //mysqli_free_result($result0);
    mysqli_free_result($result);
    //mysqli_free_result($result2);
} else{
    echo "–û—à–∏–±–∫–∞: " . mysqli_error($db);
}
```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:
```php
<?php
$sql0 = "SELECT `likes`, `dislikes`, `id`, `text`, `time`, `image` FROM posts";
$result0 = mysqli_query($db, $sql0);
$count = 2;
$rowsCount = mysqli_num_rows($result0); // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
if (isset($_GET['page'])){
    $page = $_GET['page'];
}
else{
    $page = 0;
}
$start_from = $page * 2;
$sql = "SELECT `likes`, `dislikes`, `id`, `text`, `time`, `image` FROM posts ORDER BY `time` DESC LIMIT $start_from, $count";
$sql2 = "SELECT `post_id`, `id`, `text`, `time` FROM comments ORDER BY `time` DESC";
```
```php
<?php for ($p = 0; $p < $page_count; $p++) :?>
<a href="?page=<?php echo $p; ?>"><button><?php echo $p + 1; ?></button></a>
<?php endfor; ?>
```
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –ë–î:
```php
$result = $_POST['note'];
if(empty($result)or $result == null){
    header('Location: index.php?msg=–ü–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ');
    exit();

}
$len = strlen($result);
if ($len < 3 or $len > 120){
    $err_message = urldecode('–¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 4 –∏ –Ω–µ –±–æ–ª–µ–µ 120 —Å–∏–º–≤–æ–ª–æ–≤');
    header('Location: index.php?err_message='.$err_message);
    exit();
}
$file = $_FILES['image']['name'];
$tmp_name = $_FILES['image']['tmp_name'];
$pathFile = __DIR__.'/uploads/'. $file;
move_uploaded_file($tmp_name, "uploads/" . $file);
date_default_timezone_set('Europe/Moscow');
var_dump($pathFile);
$time = date("d-m-y H:i");
$id = 0;
$result2 = mysqli_query ($db,"INSERT INTO posts (id, text, time, image) VALUES('$id', '$result', '$time', '$file')");
header('Location: /index.php');
exit();
?>
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏:
```php
<?php
if(isset($_POST['like'])){
    $id_like = $_POST['like'];
    $num_page = floor($id_like / 3);
    $num_page--;
    $sql = mysqli_query($db, 'UPDATE posts SET likes = likes + 1 WHERE id = '.$id_like.'');
    header('Location: /index.php?page='.urlencode($num_page));
    exit();
}
```
–ó–∞–ø–∏—Å—å –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –ë–î:
```php
<?php
if(isset($_GET['comment'])){
    if(isset($_GET['com'])){
        $post_id = $_GET['com'];
        $comment = $_GET['comment'];
        $len = strlen($comment);
        if ($len < 3 or $len > 120){
            $err_message = urldecode('–¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 4 –∏ –Ω–µ –±–æ–ª–µ–µ 120 —Å–∏–º–≤–æ–ª–æ–≤');
            header('Location: index.php?err_message='.$err_message);
            exit();
        }
        $time = date("d-m-y H:i");
        $id = 0;
        $sql = mysqli_query($db, "INSERT INTO comments (id, post_id, text, time) VALUES ('$id', '$post_id', '$comment', '$time')");
    }
}
header('Location: /index.php');
exit();
?>
```
